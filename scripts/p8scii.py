P8SCII = [
    r'\0', r'\*', r'\#', r'\-', r'\|', r'\+', r'\^', r'\a', r'\b', r'\t', r'\n', r'\v', r'\f', r'\r', r'\014', r'\015', '‚ñÆ', '‚ñ†', '‚ñ°', '‚Åô', '‚Åò', '‚Äñ', '‚óÄ', '‚ñ∂', '„Äå', '„Äç', '¬•', '‚Ä¢', '„ÄÅ', '„ÄÇ', '„Çõ', '„Çú', ' ', '!', r'\"', '#', '$', '%', '&', "'", '(', ')', '*', '+', ',', '-', '.', '/', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ':', ';', '<', '=', '>', '?', '@', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '[', r'\\', ']', '^', '_', '`', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '{', '|', '}', '~', '‚óã', '‚ñà', '‚ñí', 'üê±', '‚¨áÔ∏è', '‚ñë', '‚úΩ', '‚óè', '‚ô•', '‚òâ', 'ÏõÉ', '‚åÇ', '‚¨ÖÔ∏è', 'üòê', '‚ô™', 'üÖæÔ∏è', '‚óÜ', '‚Ä¶', '‚û°Ô∏è', '‚òÖ', '‚ßó', '‚¨ÜÔ∏è', 'Àá', '‚àß', '‚ùé', '‚ñ§', '‚ñ•', '„ÅÇ', '„ÅÑ', '„ÅÜ', '„Åà', '„Åä', '„Åã', '„Åç', '„Åè', '„Åë', '„Åì', '„Åï', '„Åó', '„Åô', '„Åõ', '„Åù', '„Åü', '„Å°', '„Å§', '„Å¶', '„Å®', '„Å™', '„Å´', '„Å¨', '„Å≠', '„ÅÆ', '„ÅØ', '„Å≤', '„Åµ', '„Å∏', '„Åª', '„Åæ', '„Åø', '„ÇÄ', '„ÇÅ', '„ÇÇ', '„ÇÑ', '„ÇÜ', '„Çà', '„Çâ', '„Çä', '„Çã', '„Çå', '„Çç', '„Çè', '„Çí', '„Çì', '„Å£', '„ÇÉ', '„ÇÖ', '„Çá', '„Ç¢', '„Ç§', '„Ç¶', '„Ç®', '„Ç™', '„Ç´', '„Ç≠', '„ÇØ', '„Ç±', '„Ç≥', '„Çµ', '„Ç∑', '„Çπ', '„Çª', '„ÇΩ', '„Çø', '„ÉÅ', '„ÉÑ', '„ÉÜ', '„Éà', '„Éä', '„Éã', '„Éå', '„Éç', '„Éé', '„Éè', '„Éí', '„Éï', '„Éò', '„Éõ', '„Éû', '„Éü', '„É†', '„É°', '„É¢', '„É§', '„É¶', '„É®', '„É©', '„É™', '„É´', '„É¨', '„É≠', '„ÉØ', '„É≤', '„É≥', '„ÉÉ', '„É£', '„É•', '„Éß', '‚óú', '‚óù',
]


def encode(text: str) -> bytearray:
    """Convert a python string to p8scii bytes."""
    binary = bytearray()
    i = 0
    while i < len(text):
        char = text[i]
        # escape codes (weird)
        if char == '\\':
            escape4 = text[i:i+4]
            if escape4 in (r'\014', r'\015'):
                match = escape4
                i += 4
            else:
                match = text[i:i+2]
                i += 2
        # no escape code
        else:
            match = char
            i += 1
        binary.append(P8SCII.index(match))

    return binary


def decode(binary: bytearray) -> str:
    """Convert p8scii bytes to a python string."""
    text = ''.join(P8SCII[b] for b in binary)
    return text
